#' Filter and replace values in a data.table while keeping all rows
#' 
#' @param dt A data.table object
#' @param column_name Character string specifying the column to filter on
#' @param filter_string Character string to filter with
#' @param replace_list Named list where names are column names and values are replacement values
#' @return A modified data.table with all rows
#' @import data.table
filter_and_replace <- function(dt, column_name, filter_string, replace_list) {
    # Input validation
    if (!is.data.table(dt)) {
        stop("Input must be a data.table")
    }
    if (!column_name %in% names(dt)) {
        stop("Column name not found in data.table")
    }
    if (!all(names(replace_list) %in% names(dt))) {
        stop("Some columns in replace_list not found in data.table")
    }
    
    # Create a copy to avoid modifying the original data.table
    result_dt <- copy(dt)
    
    # For each column in the replace list, update values where the filter condition is met
    for (col in names(replace_list)) {
        result_dt[get(column_name) == filter_string, (col) := replace_list[[col]]]
    }
    
    return(result_dt)
}